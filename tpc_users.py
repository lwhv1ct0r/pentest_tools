# -*- coding:utf-8 -*-
import requests
import sys
import string
import re

target = sys.argv[1]
num = sys.argv[2]
path = sys.argv[3]
f = open(path, 'a')

num = string.atoi(num)
counter = 0
print "Begin to Get Users:"
for i in range(1, num+1):
   url = target + "/author/" + str(i)
   r = requests.get(url)
   if r.status_code == 200:
        try:
            res = re.findall(r"(<meta name=\"keywords\" content=\")(.*?)(\" />)", r.content)
            print res[0][1]
            f.write(res[0][1]+"\n")
            counter += 1
        except:
            print "Unable to Get Username"
f.close
print "Done," + str(counter) + " User(s) Found in total!"
